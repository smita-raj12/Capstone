{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\smita\\\\Desktop\\\\ReactWorks\\\\capstone\\\\client\\\\src\\\\components\\\\Login.js\";\nimport React from 'react';\nimport Joi from 'joi-browser';\nimport Form from '../common/form';\nimport auth from '../services/authService';\nimport { Redirect } from 'react-router-dom';\n\nclass LoginForm extends Form {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {\n        username: '',\n        password: ''\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const {\n          username: email,\n          password\n        } = this.state.data;\n        await auth.login(email, password);\n        const {\n          state\n        } = this.props.location;\n        window.location = state ? state.from.pathname : '/';\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.username = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n\n    this.customValidation = input => {};\n  }\n\n  render() {\n    if (auth.getCurrentUser()) return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 43\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, this.renderInput(\"username\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Login\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/Users/smita/Desktop/ReactWorks/capstone/client/src/components/Login.js"],"names":["React","Joi","Form","auth","Redirect","LoginForm","state","data","username","password","errors","schema","string","required","label","doSubmit","email","login","props","location","window","from","pathname","ex","response","status","setState","customValidation","input","render","getCurrentUser","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,MAAMC,SAAN,SAAwBH,IAAxB,CAA6B;AAAA;AAAA;AAAA,SAEzBI,KAFyB,GAEjB;AACJC,MAAAA,IAAI,EAAE;AAACC,QAAAA,QAAQ,EAAC,EAAV;AAAcC,QAAAA,QAAQ,EAAC;AAAvB,OADF;AAEJC,MAAAA,MAAM,EAAC;AAFH,KAFiB;AAAA,SAMzBC,MANyB,GAMjB;AACJH,MAAAA,QAAQ,EAAGP,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CADP;AAEJL,MAAAA,QAAQ,EAAGR,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B;AAFP,KANiB;;AAAA,SAWzBC,QAXyB,GAWhB,YAAU;AACjB,UAAG;AACG,cAAM;AAACP,UAAAA,QAAQ,EAACQ,KAAV;AAAgBP,UAAAA;AAAhB,YAA4B,KAAKH,KAAL,CAAWC,IAA7C;AACA,cAAMJ,IAAI,CAACc,KAAL,CAAWD,KAAX,EAAiBP,QAAjB,CAAN;AACA,cAAM;AAACH,UAAAA;AAAD,YAAU,KAAKY,KAAL,CAAWC,QAA3B;AACAC,QAAAA,MAAM,CAACD,QAAP,GAAiBb,KAAK,GAAGA,KAAK,CAACe,IAAN,CAAWC,QAAd,GAAwB,GAA9C;AACH,OALH,CAKG,OAAMC,EAAN,EAAS;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EAA8C;AAC1C,gBAAMf,MAAM,GAAG,EAAC,GAAG,KAAKJ,KAAL,CAAWI;AAAf,WAAf;AACAA,UAAAA,MAAM,CAACF,QAAP,GAAkBe,EAAE,CAACC,QAAH,CAAYjB,IAA9B;AACA,eAAKmB,QAAL,CAAc;AAAChB,YAAAA;AAAD,WAAd;AACH;AACC;AACJ,KAxBwB;;AAAA,SAyBzBiB,gBAzByB,GAyBLC,KAAD,IAAW,CAC7B,CA1BwB;AAAA;;AA2BzBC,EAAAA,MAAM,GAAG;AAEL,QAAI1B,IAAI,CAAC2B,cAAL,EAAJ,EAA2B,oBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAE3B,wBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKC,WAAL,CAAiB,UAAjB,EAA4B,UAA5B,CADD,EAEC,KAAKA,WAAL,CAAiB,UAAjB,EAA4B,UAA5B,EAAuC,UAAvC,CAFD,EAGC,KAAKC,YAAL,CAAkB,OAAlB,CAHD,CAFJ,CADA;AASH;;AAxCwB;;AA2C7B,eAAe5B,SAAf","sourcesContent":["import React from 'react';\r\nimport Joi from 'joi-browser'\r\nimport Form from '../common/form';\r\nimport auth from '../services/authService';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass LoginForm extends Form {\r\n    \r\n    state = {\r\n        data :{username:'' ,password:''},\r\n        errors:{}\r\n    }\r\n    schema ={\r\n        username : Joi.string().required().label(\"Username\"),\r\n        password : Joi.string().required().label(\"Password\")\r\n    }\r\n\r\n    doSubmit=async ()=>{\r\n      try{\r\n            const {username:email,password} = this.state.data\r\n            await auth.login(email,password)\r\n            const {state} = this.props.location;\r\n            window.location= state ? state.from.pathname :'/';\r\n        }catch(ex){\r\n       if (ex.response && ex.response.status === 400){\r\n           const errors = {...this.state.errors}\r\n           errors.username = ex.response.data;\r\n           this.setState({errors})\r\n       }\r\n        }\r\n    }\r\n    customValidation = (input) => {\r\n    }\r\n    render() { \r\n\r\n        if (auth.getCurrentUser()) return <Redirect to='/'/>\r\n\r\n        return (\r\n        <div>\r\n            <h1>Login</h1> \r\n            <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput(\"username\",\"Username\")}\r\n            {this.renderInput(\"password\",\"Password\",\"password\")}\r\n            {this.renderButton(\"Login\")} \r\n            </form>\r\n        </div> );\r\n    }\r\n}\r\n \r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}