{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\smita\\\\Desktop\\\\ReactWorks\\\\capstone\\\\client\\\\src\\\\components\\\\Register.js\";\nimport React from 'react';\nimport Joi from 'joi-browser';\nimport Form from '../common/form';\nimport auth from '../services/authService';\nimport * as userService from '../services/registrationService';\n\nclass RegisterForm extends Form {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {\n        username: '',\n        password: '',\n        name: ''\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().min(8).label(\"Password\"),\n      name: Joi.string().required().min(5).label(\"Name\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const response = await userService.register(this.state.data);\n        console.log(response);\n        auth.loginWithJwt(response.headers['x-auth-token']);\n        window.location = '/';\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.username = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n\n    this.customValidation = input => {};\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, this.renderInput(\"username\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderInput(\"name\", \"Name\"), this.renderButton(\"Register\")));\n  }\n\n}\n\nexport default RegisterForm;","map":{"version":3,"sources":["C:/Users/smita/Desktop/ReactWorks/capstone/client/src/components/Register.js"],"names":["React","Joi","Form","auth","userService","RegisterForm","state","data","username","password","name","errors","schema","string","required","label","min","doSubmit","response","register","console","log","loginWithJwt","headers","window","location","ex","status","setState","customValidation","input","render","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAO,KAAKC,WAAZ,MAA6B,iCAA7B;;AAEA,MAAMC,YAAN,SAA2BH,IAA3B,CAAgC;AAAA;AAAA;AAAA,SAE5BI,KAF4B,GAEpB;AACJC,MAAAA,IAAI,EAAE;AAACC,QAAAA,QAAQ,EAAC,EAAV;AAAaC,QAAAA,QAAQ,EAAC,EAAtB;AAAyBC,QAAAA,IAAI,EAAC;AAA9B,OADF;AAEJC,MAAAA,MAAM,EAAC;AAFH,KAFoB;AAAA,SAO5BC,MAP4B,GAOpB;AACJJ,MAAAA,QAAQ,EAAGP,GAAG,CAACY,MAAJ,GACNC,QADM,GAENC,KAFM,CAEA,UAFA,CADP;AAIJN,MAAAA,QAAQ,EAAGR,GAAG,CAACY,MAAJ,GACNC,QADM,GAENE,GAFM,CAEF,CAFE,EAGND,KAHM,CAGA,UAHA,CAJP;AAQJL,MAAAA,IAAI,EAAGT,GAAG,CAACY,MAAJ,GACFC,QADE,GAEFE,GAFE,CAEE,CAFF,EAGFD,KAHE,CAGI,MAHJ;AARH,KAPoB;;AAAA,SAqB3BE,QArB2B,GAqBlB,YAAS;AACf,UAAG;AACC,cAAMC,QAAQ,GAAC,MAAMd,WAAW,CAACe,QAAZ,CAAqB,KAAKb,KAAL,CAAWC,IAAhC,CAArB;AACAa,QAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACAf,QAAAA,IAAI,CAACmB,YAAL,CAAkBJ,QAAQ,CAACK,OAAT,CAAiB,cAAjB,CAAlB;AACAC,QAAAA,MAAM,CAACC,QAAP,GAAgB,GAAhB;AACH,OALD,CAKC,OAAMC,EAAN,EAAS;AACV,YAAIA,EAAE,CAACR,QAAH,IAAeQ,EAAE,CAACR,QAAH,CAAYS,MAAZ,KAAuB,GAA1C,EAA8C;AAC1C,gBAAMhB,MAAM,GAAG,EAAC,GAAG,KAAKL,KAAL,CAAWK;AAAf,WAAf;AACAA,UAAAA,MAAM,CAACH,QAAP,GAAkBkB,EAAE,CAACR,QAAH,CAAYX,IAA9B;AACA,eAAKqB,QAAL,CAAc;AAACjB,YAAAA;AAAD,WAAd;AACH;AACJ;AAEA,KAnC2B;;AAAA,SAoC5BkB,gBApC4B,GAoCRC,KAAD,IAAW,CAC7B,CArC2B;AAAA;;AAsC5BC,EAAAA,MAAM,GAAG;AAEL,wBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKC,WAAL,CAAiB,UAAjB,EAA4B,UAA5B,CADD,EAEC,KAAKA,WAAL,CAAiB,UAAjB,EAA4B,UAA5B,EAAuC,UAAvC,CAFD,EAGC,KAAKA,WAAL,CAAiB,MAAjB,EAAwB,MAAxB,CAHD,EAIC,KAAKC,YAAL,CAAkB,UAAlB,CAJD,CAFJ,CADA;AAUH;;AAlD2B;;AAqDhC,eAAe7B,YAAf","sourcesContent":["import React from 'react';\r\nimport Joi from 'joi-browser'\r\nimport Form from '../common/form';\r\nimport auth from '../services/authService';\r\nimport * as userService from '../services/registrationService';\r\n\r\nclass RegisterForm extends Form {\r\n    \r\n    state = {\r\n        data :{username:'',password:'',name:''},\r\n        errors:{}\r\n    }\r\n                         \r\n    schema ={\r\n        username : Joi.string()\r\n            .required()\r\n            .label(\"Username\"),\r\n        password : Joi.string()\r\n            .required()\r\n            .min(8)\r\n            .label(\"Password\"),\r\n        name : Joi.string()\r\n            .required()\r\n            .min(5)\r\n            .label(\"Name\"),\r\n    }\r\n\r\n     doSubmit=async()=>{\r\n        try{\r\n            const response=await userService.register(this.state.data)\r\n            console.log(response)\r\n            auth.loginWithJwt(response.headers['x-auth-token'])\r\n            window.location='/'\r\n        }catch(ex){\r\n        if (ex.response && ex.response.status === 400){\r\n            const errors = {...this.state.errors}\r\n            errors.username = ex.response.data;\r\n            this.setState({errors})\r\n        }\r\n    }\r\n        \r\n    }\r\n    customValidation = (input) => {\r\n    }\r\n    render() { \r\n       \r\n        return (\r\n        <div>\r\n            <h1>Register</h1> \r\n            <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput(\"username\",\"Username\")}\r\n            {this.renderInput(\"password\",\"Password\",\"password\")}\r\n            {this.renderInput(\"name\",\"Name\")}\r\n            {this.renderButton(\"Register\")} \r\n            </form>\r\n        </div> );\r\n    }\r\n}\r\n \r\nexport default RegisterForm;"]},"metadata":{},"sourceType":"module"}