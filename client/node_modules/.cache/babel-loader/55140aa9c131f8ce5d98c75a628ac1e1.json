{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\smita\\\\Desktop\\\\ReactWorks\\\\capstone\\\\client\\\\src\\\\components\\\\TimeEntries.js\";\nimport React, { Component } from 'react';\nimport TimeEntryForm from './TimeEntryForm';\nimport moment from 'moment'; //import { getTimeEntryList, saveTimeEntry, deleteTimeEntry } from './FakeTimeEntries';\n\nimport { getWorkOrders } from './FakeWorkOrders';\n\nclass TimeEntries extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      timeEntries: [],\n      workOrders: [],\n      dateArray: [],\n      weekArray: [],\n      startDate: \"2021-01-01\"\n    };\n\n    this.handleSave = timeEntry => {\n      const timeEntry1 = { ...timeEntry\n      };\n      let newTimeEntry = saveTimeEntry(timeEntry1);\n      const timeEntries = this.state.timeEntries;\n      timeEntries.push({\n        _id: newTimeEntry._id,\n        date: timeEntry.date,\n        week: moment(timeEntry.date, \"MM-DD-YYYY\").week(),\n        workOrder: timeEntry.workOrderId,\n        hours: 5\n      });\n      console.log(\"timeEntries \", timeEntries);\n      this.setState({\n        timeEntries\n      });\n    };\n\n    this.handleDelete = timeEntry => {\n      const origionaltimeEntries = this.state.timeEntries;\n      const timeEntries = origionaltimeEntries.filter(m => m._id !== timeEntry._id);\n      console.log(origionaltimeEntries, timeEntry);\n      this.setState({\n        timeEntries\n      });\n      deleteTimeEntry(timeEntry._id);\n      this.setState({\n        timeEntries\n      });\n    };\n  }\n\n  getTimeEntryList() {\n    Axios.get(\"http://localhost:3001/api/get\").then(res => res.json()).then(json => {\n      this.setState({\n        timeEntries: json\n      });\n    });\n  }\n\n  componentDidMount() {\n    const workOrders = getWorkOrders();\n    const timeEntries = this.getTimeEntryList();\n    var dateArray = [];\n    var weekArray = [];\n    let prevWeekNumber = [];\n    let weekNumber = \" \";\n    var currentDate = moment(moment(moment(), \"MM-DD-YYYY\").subtract(10, \"days\").format(\"MM/DD/YYYY\"));\n    var startDate = moment(moment(moment(), \"MM-DD-YYYY\").subtract(10, \"days\").format(\"MM/DD/YYYY\"));\n    var stopDate = moment(moment(moment(), \"MM-DD-YYYY\").add(10, \"days\").format(\"MM/DD/YYYY\"));\n    var x = 0;\n    let y = 0;\n\n    while (currentDate <= stopDate) {\n      dateArray.push({\n        _id: x,\n        name: moment(currentDate).format(\"MM/DD/YYYY\")\n      });\n      currentDate = moment(currentDate).add(1, \"days\");\n      x = x + 1;\n      weekNumber = moment(currentDate, \"MM-DD-YYYY\").week();\n\n      if (weekNumber !== prevWeekNumber) {\n        weekArray.push({\n          _id: y,\n          name: weekNumber\n        });\n        prevWeekNumber = weekNumber;\n        y = y + 1;\n      }\n    }\n\n    this.setState({\n      timeEntries,\n      workOrders,\n      dateArray,\n      weekArray,\n      startDate\n    });\n  }\n\n  render() {\n    const {\n      timeEntries\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, \" \", timeEntries.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(TimeEntryForm, {\n        timeEntry: item,\n        timeEntries: timeEntries,\n        onDelete: this.handleDelete,\n        onSave: this.handleSave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      }));\n    })));\n  }\n\n}\n\nexport default TimeEntries;","map":{"version":3,"sources":["C:/Users/smita/Desktop/ReactWorks/capstone/client/src/components/TimeEntries.js"],"names":["React","Component","TimeEntryForm","moment","getWorkOrders","TimeEntries","state","timeEntries","workOrders","dateArray","weekArray","startDate","handleSave","timeEntry","timeEntry1","newTimeEntry","saveTimeEntry","push","_id","date","week","workOrder","workOrderId","hours","console","log","setState","handleDelete","origionaltimeEntries","filter","m","deleteTimeEntry","getTimeEntryList","Axios","get","then","res","json","componentDidMount","prevWeekNumber","weekNumber","currentDate","subtract","format","stopDate","add","x","y","name","render","map","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport TimeEntryForm from './TimeEntryForm';\r\nimport moment from 'moment';\r\n//import { getTimeEntryList, saveTimeEntry, deleteTimeEntry } from './FakeTimeEntries';\r\nimport { getWorkOrders} from './FakeWorkOrders';\r\n\r\nclass TimeEntries extends Component {\r\n\r\n    state = {\r\n        timeEntries: [],\r\n        workOrders: [],\r\n        dateArray: [],\r\n        weekArray: [],\r\n        startDate: \"2021-01-01\"\r\n        \r\n    };\r\n    \r\n    getTimeEntryList(){\r\n        Axios.get(\"http://localhost:3001/api/get\")\r\n        .then((res) => res.json())\r\n             .then((json) => {\r\n                 this.setState({\r\n                    timeEntries: json,\r\n                     \r\n                 });\r\n             })\r\n    }\r\n    componentDidMount() {\r\n        const  workOrders  =  getWorkOrders();\r\n        const  timeEntries  = this.getTimeEntryList();\r\n\r\n        var dateArray = [];\r\n        var weekArray = [];\r\n        let prevWeekNumber = [];\r\n        let weekNumber = \" \";\r\n\r\n        var currentDate = moment(\r\n            moment(moment(), \"MM-DD-YYYY\").subtract(10, \"days\").format(\"MM/DD/YYYY\")\r\n        );\r\n\r\n        var startDate = moment(\r\n            moment(moment(), \"MM-DD-YYYY\").subtract(10, \"days\").format(\"MM/DD/YYYY\")\r\n        );\r\n\r\n        var stopDate = moment(\r\n            moment(moment(), \"MM-DD-YYYY\").add(10, \"days\").format(\"MM/DD/YYYY\")\r\n        );\r\n\r\n        var x = 0;\r\n        let y = 0;\r\n\r\n        while (currentDate <= stopDate) {\r\n            dateArray.push({\r\n                _id: x,\r\n                name: moment(currentDate).format(\"MM/DD/YYYY\"),\r\n            });\r\n            currentDate = moment(currentDate).add(1, \"days\");\r\n            x = x + 1;\r\n            weekNumber = moment(currentDate, \"MM-DD-YYYY\").week();\r\n\r\n            if (weekNumber !== prevWeekNumber) {\r\n                weekArray.push({\r\n                    _id: y,\r\n                    name: weekNumber,\r\n                });\r\n                prevWeekNumber = weekNumber;\r\n                y = y +1;\r\n            }\r\n        }\r\n        this.setState({ timeEntries, workOrders, dateArray, weekArray, startDate });\r\n    }\r\n    \r\n    \r\n\r\n    handleSave =  (timeEntry) => {\r\n        \r\n        const timeEntry1 = {...timeEntry}\r\n        let newTimeEntry= saveTimeEntry(timeEntry1);\r\n\r\n        const timeEntries = this.state.timeEntries;\r\n\r\n        \r\n        timeEntries.push({\r\n            _id: newTimeEntry._id,\r\n            date: timeEntry.date,\r\n            week: moment(timeEntry.date, \"MM-DD-YYYY\").week(),\r\n            workOrder: timeEntry.workOrderId,\r\n            hours: 5,\r\n        });\r\n    \r\n            console.log(\"timeEntries \", timeEntries);\r\n            this.setState({ timeEntries });\r\n    };\r\n    \r\n    handleDelete = (timeEntry) => {\r\n        const origionaltimeEntries = this.state.timeEntries;\r\n       \r\n        const timeEntries = origionaltimeEntries.filter(\r\n            (m) => m._id !== timeEntry._id\r\n        );\r\n        console.log(origionaltimeEntries,timeEntry)\r\n        this.setState({ timeEntries });\r\n        deleteTimeEntry(timeEntry._id);\r\n        this.setState({ timeEntries });\r\n        \r\n    };\r\n\r\n    render() {\r\n\r\n        const {timeEntries} = this.state\r\n\r\n        return (\r\n            <div>\r\n                <div> {timeEntries.map((item) => {\r\n                        return <div  key={item._id}>\r\n                                    \r\n                        <TimeEntryForm\r\n                            timeEntry={item}\r\n                            timeEntries={timeEntries}\r\n                            onDelete={this.handleDelete}\r\n                            onSave={this.handleSave}\r\n                        />\r\n                        </div>\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TimeEntries;"]},"metadata":{},"sourceType":"module"}